levelbar {
    min-height: 8px;
    border-radius: 4px; 
}

levelbar trough block,
levelbar trough block.filled {
    background-clip: padding-box;
}

levelbar > trough > box {
    background: none;
}

levelbar:filled {
    background-color: @lumina_primary;
    border-radius: 0.25em;
}
levelbar block {
    border-radius: 3px; /* Un punto menos que el contenedor para encaje perfecto */
}

levelbar trough {
    background-color: @lumina_surface;
    background-image: none;
    border: 0.0625em solid @lumina_outline;
    border-radius: 0.375em;   /* 6px */
    padding: 0.125em;         /* aire interno real */
    min-height: 0.625em;      /* ~10px */
}

levelbar.continuous trough {
    padding: 0.125em;
}

levelbar:focus trough {
    border-color: @lumina_primary;
    box-shadow: inset 0 0 0 0.125em alpha(@lumina_primary, 0.25);
}
levelbar:disabled {
    opacity: 0.5;
}

/* GTK a veces inserta una box interna */
levelbar trough > box {
    padding: 0;
    background: none;
}

/* --- BLOQUES DE NIVEL --- */
levelbar block {
    background-clip: padding-box;
    min-width: 0.375em;       /* 6px */
    margin: 0 0.0625em;       /* 1px separaciÃ³n */
    border-radius: 0.125em;   /* 2px tÃ©cnico */
    border: none;             /* ðŸ”§ evita glitches */
    transition: background-color 200ms ease,
                box-shadow 200ms ease;
}

levelbar block.low {
    background-color: @lumina_error;
}

/* Medio / Advertencia */
levelbar block.medium {
    background-color: @lumina_warning;
}

/* Alto / Normal */
levelbar block.high,
levelbar block.default {
    background-color: @lumina_primary;
}

/* Lleno */
levelbar block.full {
    background-color: @lumina_success;
    box-shadow: 0 0 0.25em alpha(@lumina_success, 0.45);
}

/* --- ESTADOS INACTIVOS --- */
levelbar:backdrop block {
    opacity: 0.6;
}

levelbar block.low {
  margin-left: 0.125em;
  }
  
  levelbar.continuous block {
    background-image: linear-gradient(
        90deg,
        alpha(white, 0.18),
        alpha(white, 0.0)
    );
    background-size: 200% 100%;
    animation: lumina_level_pulse 2.6s ease-in-out infinite;
}

@keyframes lumina_level_pulse {
    0%   { background-position: 0% 0%; }
    50%  { background-position: 100% 0%; }
    100% { background-position: 0% 0%; }
}

levelbar.vertical {
    min-width: 0.625em;   /* ~10px */
    min-height: 3em;
}

levelbar.vertical:filled {
    background-color: @lumina_primary;
    border-radius: 0.25em;
    background-image: linear-gradient(
        to right,
        alpha(white, 0.08),
        alpha(black, 0.12)
    );
}

levelbar.vertical block {
    min-height: 0.375em;
    margin: 0.0625em 0;
    border-radius: 0.125em;
}

levelbar.vertical block.low {
    background-color: @lumina_error;
}

levelbar.vertical block.medium {
    background-color: @lumina_warning;
}

levelbar.vertical block.high,
levelbar.vertical block.default {
    background-color: @lumina_primary;
}

levelbar.vertical block.full {
    background-color: @lumina_success;
    box-shadow: 0 0 0.25em alpha(@lumina_success, 0.45);
}

levelbar.vertical:backdrop block,
levelbar.vertical:backdrop:filled {
    opacity: 0.6;
}

